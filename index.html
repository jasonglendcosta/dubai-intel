<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dubai Market Intel | GOD TIER</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@400;500;600;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        :root {
            --bg-primary: #0a0a0f;
            --bg-card: rgba(255, 255, 255, 0.03);
            --bg-card-hover: rgba(255, 255, 255, 0.06);
            --accent: #D86DCB;
            --accent-glow: rgba(216, 109, 203, 0.4);
            --text-primary: #ffffff;
            --text-secondary: rgba(255, 255, 255, 0.6);
            --text-muted: rgba(255, 255, 255, 0.4);
            --green: #00D26A;
            --red: #FF4757;
            --yellow: #FFA502;
            --blue: #3498db;
            --border: rgba(255, 255, 255, 0.08);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
        }

        .bg-gradient {
            position: fixed;
            inset: 0;
            background: 
                radial-gradient(ellipse at 20% 0%, rgba(216, 109, 203, 0.1) 0%, transparent 50%),
                radial-gradient(ellipse at 80% 100%, rgba(139, 92, 246, 0.08) 0%, transparent 50%);
            pointer-events: none;
        }

        .container {
            max-width: 1800px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            z-index: 1;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            flex-wrap: wrap;
            gap: 16px;
        }

        .logo {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.75rem;
            font-weight: 700;
            background: linear-gradient(135deg, var(--accent), #a855f7);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header-stats {
            display: flex;
            gap: 24px;
        }

        .stat-box {
            text-align: center;
            padding: 8px 16px;
            background: var(--bg-card);
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .stat-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .stat-label {
            font-size: 0.625rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        .btn {
            background: linear-gradient(135deg, var(--accent), #a855f7);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            font-family: 'Space Grotesk', sans-serif;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 20px var(--accent-glow);
        }

        .btn-sm {
            padding: 6px 12px;
            font-size: 0.75rem;
        }

        .btn-ghost {
            background: transparent;
            border: 1px solid var(--border);
        }

        .btn-ghost:hover {
            border-color: var(--accent);
            background: rgba(216, 109, 203, 0.1);
        }

        /* Search */
        .search-bar {
            display: flex;
            gap: 12px;
            margin-bottom: 24px;
        }

        .search-input {
            flex: 1;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            padding: 12px 16px;
            color: var(--text-primary);
            font-family: 'Inter', sans-serif;
            font-size: 1rem;
        }

        .search-input:focus {
            outline: none;
            border-color: var(--accent);
        }

        /* Filter Tabs */
        .filter-tabs {
            display: flex;
            gap: 8px;
            margin-bottom: 24px;
            flex-wrap: wrap;
        }

        .filter-tab {
            padding: 8px 16px;
            border-radius: 20px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 0.875rem;
            transition: all 0.3s;
        }

        .filter-tab:hover, .filter-tab.active {
            background: rgba(216, 109, 203, 0.15);
            border-color: var(--accent);
            color: var(--text-primary);
        }

        /* Main Grid - News takes more space */
        .main-grid {
            display: grid;
            grid-template-columns: 1fr 380px;
            gap: 20px;
            margin-bottom: 24px;
        }

        @media (max-width: 1200px) {
            .main-grid { grid-template-columns: 1fr; }
        }

        /* Cards */
        .card {
            background: var(--bg-card);
            backdrop-filter: blur(20px);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            transition: all 0.3s;
            animation: fadeInUp 0.5s ease forwards;
        }

        .card:hover {
            border-color: rgba(216, 109, 203, 0.3);
        }

        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .card-title {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1rem;
            font-weight: 600;
            margin-bottom: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 8px;
        }

        .card-title span {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        /* Competitor Cards */
        .competitor-grid {
            display: grid;
            grid-template-columns: repeat(6, 1fr);
            gap: 12px;
            margin-bottom: 24px;
        }

        @media (max-width: 1200px) {
            .competitor-grid { grid-template-columns: repeat(3, 1fr); }
        }

        @media (max-width: 768px) {
            .competitor-grid { grid-template-columns: repeat(2, 1fr); }
        }

        .competitor-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 12px;
            padding: 16px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .competitor-card:hover, .competitor-card.active {
            border-color: var(--accent);
            background: rgba(216, 109, 203, 0.1);
            transform: translateY(-2px);
        }

        .competitor-logo {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--accent), #a855f7);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 12px;
            font-weight: 700;
            font-size: 1.25rem;
        }

        .competitor-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .competitor-mentions {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .competitor-trend {
            font-size: 0.75rem;
            margin-top: 4px;
        }

        /* News Cards - LARGER & MORE INTERACTIVE */
        .news-card {
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 16px;
            padding: 20px;
            margin-bottom: 16px;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .news-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .news-card:hover {
            border-color: var(--accent);
            transform: translateX(4px);
            box-shadow: 0 8px 32px rgba(216, 109, 203, 0.15);
        }

        .news-card:hover::before {
            opacity: 1;
        }

        .news-card.expanded {
            background: var(--bg-card-hover);
        }

        .news-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 12px;
        }

        .news-source {
            font-size: 0.7rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            padding: 4px 10px;
            background: rgba(216, 109, 203, 0.15);
            border-radius: 4px;
            font-weight: 600;
        }

        .news-meta {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .news-date {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .news-title {
            font-weight: 700;
            font-size: 1.125rem;
            margin-bottom: 12px;
            line-height: 1.4;
            cursor: pointer;
        }

        .news-title:hover {
            color: var(--accent);
        }

        .news-summary {
            font-size: 0.9rem;
            color: var(--text-secondary);
            line-height: 1.6;
            margin-bottom: 16px;
        }

        .news-ai-summary {
            padding: 16px;
            background: rgba(216, 109, 203, 0.08);
            border-radius: 12px;
            font-size: 0.85rem;
            border-left: 4px solid var(--accent);
            margin-bottom: 16px;
        }

        .news-ai-label {
            font-size: 0.7rem;
            color: var(--accent);
            text-transform: uppercase;
            letter-spacing: 0.05em;
            margin-bottom: 6px;
            font-weight: 600;
        }

        .news-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 12px;
        }

        .news-tags {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
        }

        .news-tag {
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 4px;
            background: rgba(255, 255, 255, 0.05);
            color: var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
        }

        .news-tag:hover {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-primary);
        }

        .news-tag.competitor {
            background: rgba(216, 109, 203, 0.15);
            color: var(--accent);
        }

        .news-actions {
            display: flex;
            gap: 8px;
        }

        .news-link {
            display: inline-flex;
            align-items: center;
            gap: 6px;
            padding: 8px 14px;
            background: linear-gradient(135deg, var(--accent), #a855f7);
            border-radius: 8px;
            color: white;
            text-decoration: none;
            font-size: 0.75rem;
            font-weight: 600;
            transition: all 0.3s;
        }

        .news-link:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 16px var(--accent-glow);
        }

        .news-link-secondary {
            background: transparent;
            border: 1px solid var(--border);
            color: var(--text-secondary);
        }

        .news-link-secondary:hover {
            border-color: var(--accent);
            color: var(--text-primary);
            box-shadow: none;
        }

        .sentiment-badge {
            display: inline-flex;
            align-items: center;
            gap: 4px;
            font-size: 0.7rem;
            padding: 4px 10px;
            border-radius: 4px;
            font-weight: 600;
        }

        .sentiment-positive {
            background: rgba(0, 210, 106, 0.15);
            color: var(--green);
        }

        .sentiment-negative {
            background: rgba(255, 71, 87, 0.15);
            color: var(--red);
        }

        .sentiment-neutral {
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-secondary);
        }

        /* Expandable details */
        .news-expanded {
            display: none;
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid var(--border);
        }

        .news-card.expanded .news-expanded {
            display: block;
        }

        .news-related {
            margin-top: 12px;
        }

        .news-related-title {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 8px;
            text-transform: uppercase;
        }

        .news-related-item {
            display: flex;
            gap: 8px;
            padding: 8px 0;
            border-bottom: 1px solid var(--border);
            font-size: 0.85rem;
            cursor: pointer;
        }

        .news-related-item:hover {
            color: var(--accent);
        }

        /* Large News Scroll Container */
        .news-scroll-container {
            max-height: calc(100vh - 350px);
            min-height: 600px;
            overflow-y: auto;
            padding-right: 8px;
        }

        .news-scroll-container::-webkit-scrollbar {
            width: 6px;
        }

        .news-scroll-container::-webkit-scrollbar-track {
            background: var(--border);
            border-radius: 3px;
        }

        .news-scroll-container::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 3px;
        }

        /* Sidebar */
        .sidebar {
            display: flex;
            flex-direction: column;
            gap: 16px;
        }

        /* Competitor Profile */
        .profile-header {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
        }

        .profile-logo {
            width: 64px;
            height: 64px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent), #a855f7);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            font-weight: 700;
        }

        .profile-info h2 {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.25rem;
            margin-bottom: 4px;
        }

        .profile-info p {
            font-size: 0.875rem;
            color: var(--text-secondary);
        }

        .profile-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
            margin-bottom: 16px;
        }

        .profile-stat {
            text-align: center;
            padding: 12px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
        }

        .profile-stat-value {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.25rem;
            font-weight: 700;
        }

        .profile-stat-label {
            font-size: 0.625rem;
            color: var(--text-muted);
            text-transform: uppercase;
        }

        /* Market Trends */
        .trend-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--border);
            cursor: pointer;
            transition: all 0.2s;
        }

        .trend-item:hover {
            padding-left: 8px;
            border-color: var(--accent);
        }

        .trend-item:last-child {
            border-bottom: none;
        }

        .trend-area {
            font-weight: 600;
        }

        .trend-price {
            font-family: 'Space Grotesk', sans-serif;
        }

        .trend-change {
            font-size: 0.75rem;
            font-weight: 600;
        }

        /* Launch Calendar */
        .launch-item {
            display: flex;
            gap: 12px;
            padding: 12px;
            background: rgba(255, 255, 255, 0.02);
            border-radius: 8px;
            margin-bottom: 8px;
            cursor: pointer;
            transition: all 0.3s;
            border: 1px solid transparent;
        }

        .launch-item:hover {
            border-color: var(--accent);
            background: rgba(216, 109, 203, 0.08);
        }

        .launch-date {
            min-width: 50px;
            text-align: center;
            padding: 8px;
            background: var(--accent);
            border-radius: 8px;
        }

        .launch-month {
            font-size: 0.6rem;
            text-transform: uppercase;
        }

        .launch-day {
            font-family: 'Space Grotesk', sans-serif;
            font-size: 1.125rem;
            font-weight: 700;
        }

        .launch-details {
            flex: 1;
        }

        .launch-details h4 {
            font-weight: 600;
            margin-bottom: 4px;
            font-size: 0.9rem;
        }

        .launch-details p {
            font-size: 0.75rem;
            color: var(--text-muted);
        }

        .launch-link {
            display: flex;
            align-items: center;
            color: var(--accent);
            font-size: 0.75rem;
            margin-top: 4px;
            gap: 4px;
        }

        /* Scroll */
        .scroll-container {
            max-height: 300px;
            overflow-y: auto;
        }

        .scroll-container::-webkit-scrollbar {
            width: 4px;
        }

        .scroll-container::-webkit-scrollbar-track {
            background: var(--border);
            border-radius: 2px;
        }

        .scroll-container::-webkit-scrollbar-thumb {
            background: var(--accent);
            border-radius: 2px;
        }

        .positive { color: var(--green); }
        .negative { color: var(--red); }

        /* Modal for full article */
        .modal-overlay {
            display: none;
            position: fixed;
            inset: 0;
            background: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            z-index: 1000;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .modal-overlay.active {
            display: flex;
        }

        .modal-content {
            background: var(--bg-primary);
            border: 1px solid var(--border);
            border-radius: 20px;
            max-width: 800px;
            width: 100%;
            max-height: 90vh;
            overflow-y: auto;
            padding: 32px;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 16px;
            right: 16px;
            background: var(--bg-card);
            border: 1px solid var(--border);
            border-radius: 8px;
            width: 36px;
            height: 36px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.2s;
        }

        .modal-close:hover {
            border-color: var(--accent);
            color: var(--text-primary);
        }

        /* View toggle */
        .view-toggle {
            display: flex;
            gap: 4px;
            background: var(--bg-card);
            padding: 4px;
            border-radius: 8px;
            border: 1px solid var(--border);
        }

        .view-btn {
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 0.75rem;
            cursor: pointer;
            transition: all 0.2s;
            border: none;
            background: transparent;
            color: var(--text-muted);
        }

        .view-btn.active {
            background: var(--accent);
            color: white;
        }
    </style>
</head>
<body>
    <div class="bg-gradient"></div>
    
    <div class="container">
        <header>
            <div>
                <div class="logo">üè¢ Dubai Market Intel</div>
                <div style="font-size: 0.875rem; color: var(--text-muted); margin-top: 4px;">One Development Competitive Intelligence</div>
            </div>
            <div class="header-stats">
                <div class="stat-box">
                    <div class="stat-value" id="totalNews">24</div>
                    <div class="stat-label">Articles Today</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value" id="competitorMentions">12</div>
                    <div class="stat-label">Competitor Mentions</div>
                </div>
                <div class="stat-box">
                    <div class="stat-value positive" id="marketSentiment">+67%</div>
                    <div class="stat-label">Market Sentiment</div>
                </div>
            </div>
            <button class="btn" onclick="refreshAll()">‚Üª Refresh All</button>
        </header>

        <!-- Search -->
        <div class="search-bar">
            <input type="text" class="search-input" id="searchInput" placeholder="üîç Search news, competitors, keywords..." oninput="filterNews()">
        </div>

        <!-- Filter Tabs -->
        <div class="filter-tabs">
            <div class="filter-tab active" onclick="setFilter('all')">All News</div>
            <div class="filter-tab" onclick="setFilter('launch')">üöÄ New Launches</div>
            <div class="filter-tab" onclick="setFilter('offplan')">üìã Off-Plan</div>
            <div class="filter-tab" onclick="setFilter('transaction')">üí∞ Transactions</div>
            <div class="filter-tab" onclick="setFilter('regulatory')">‚öñÔ∏è Regulatory</div>
            <div class="filter-tab" onclick="setFilter('luxury')">üíé Luxury</div>
            <div class="filter-tab" onclick="setFilter('investment')">üìà Investment</div>
        </div>

        <!-- Competitor Cards -->
        <div class="competitor-grid" id="competitorGrid">
            <!-- Populated by JS -->
        </div>

        <!-- Main Content -->
        <div class="main-grid">
            <!-- News Feed - LARGER -->
            <div class="card">
                <div class="card-title">
                    <span>üì∞ Market News & Intelligence</span>
                    <div class="view-toggle">
                        <button class="view-btn active" onclick="setView('expanded')">Expanded</button>
                        <button class="view-btn" onclick="setView('compact')">Compact</button>
                    </div>
                </div>
                <div class="news-scroll-container" id="newsFeed">
                    <!-- Populated by JS -->
                </div>
            </div>

            <!-- Sidebar -->
            <div class="sidebar">
                <!-- Selected Competitor Profile -->
                <div class="card" id="competitorProfile">
                    <div class="card-title"><span>üéØ Competitor Profile</span></div>
                    <div id="profileContent">
                        <p style="color: var(--text-muted);">Select a competitor to view profile</p>
                    </div>
                </div>

                <!-- Market Trends -->
                <div class="card">
                    <div class="card-title"><span>üìä Price/SqFt by Area</span></div>
                    <div id="marketTrends">
                        <!-- Populated by JS -->
                    </div>
                </div>

                <!-- Launch Calendar -->
                <div class="card">
                    <div class="card-title"><span>üóìÔ∏è Upcoming Launches</span></div>
                    <div class="scroll-container" id="launchCalendar">
                        <!-- Populated by JS -->
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal for full article view -->
    <div class="modal-overlay" id="articleModal" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModal()">‚úï</button>
            <div id="modalContent"></div>
        </div>
    </div>

    <script>
        // Competitors data with websites
        const COMPETITORS = [
            { id: 'emaar', name: 'Emaar', logo: 'E', mentions: 45, trend: +12, strength: 95, projects: 'Downtown, Dubai Hills, Creek Harbour', website: 'https://www.emaar.com' },
            { id: 'damac', name: 'DAMAC', logo: 'D', mentions: 32, trend: +5, strength: 82, projects: 'Business Bay, DAMAC Hills, Cavalli Tower', website: 'https://www.damacproperties.com' },
            { id: 'nakheel', name: 'Nakheel', logo: 'N', mentions: 28, trend: -3, strength: 78, projects: 'Palm Jumeirah, JVC, Dragon Mart', website: 'https://www.nakheel.com' },
            { id: 'sobha', name: 'Sobha', logo: 'S', mentions: 21, trend: +8, strength: 75, projects: 'Sobha Hartland, MBR City', website: 'https://www.sobharealty.com' },
            { id: 'meraas', name: 'Meraas', logo: 'M', mentions: 18, trend: +2, strength: 72, projects: 'City Walk, Bluewaters, La Mer', website: 'https://www.meraas.com' },
            { id: 'aldar', name: 'Aldar', logo: 'A', mentions: 15, trend: +15, strength: 85, projects: 'Yas Island, Saadiyat, Reem Island', website: 'https://www.aldar.com' }
        ];

        // News data with real source URLs
        const NEWS_DATA = [
            {
                id: 1,
                title: 'Emaar launches AED 5 billion waterfront project in Dubai Creek Harbour',
                source: 'Gulf News',
                sourceUrl: 'https://gulfnews.com/business/property',
                date: '2 hours ago',
                summary: 'Emaar Properties has unveiled plans for a new luxury waterfront development featuring 1,200 units with panoramic views of Dubai Creek Tower. The project spans 2.5 million sqft with prices starting from AED 1.8M.',
                aiSummary: 'Major launch from market leader. Direct competition to One Development\'s coastal positioning. Watch for pricing strategy in 2BR segment. Consider timing counter-launch.',
                sentiment: 'neutral',
                tags: ['emaar', 'launch', 'luxury', 'waterfront'],
                competitor: 'emaar',
                fullArticleUrl: 'https://gulfnews.com/business/property/emaar-launches-new-creek-harbour-project',
                relatedLinks: [
                    { title: 'Dubai Creek Harbour masterplan', url: 'https://www.emaar.com/creek-harbour' },
                    { title: 'Emaar Q4 2025 results', url: 'https://www.emaar.com/investors' }
                ]
            },
            {
                id: 2,
                title: 'Dubai real estate transactions hit record AED 12.5B in January',
                source: 'Khaleej Times',
                sourceUrl: 'https://www.khaleejtimes.com/business/real-estate',
                date: '4 hours ago',
                summary: 'The Dubai Land Department reported unprecedented transaction volumes, with off-plan sales accounting for 65% of total value. This marks a 28% increase YoY.',
                aiSummary: 'Market strength continues. Off-plan dominance validates One Development\'s strategy. Investor appetite remains strong. Consider accelerating launch timeline.',
                sentiment: 'positive',
                tags: ['transaction', 'market', 'offplan'],
                competitor: null,
                fullArticleUrl: 'https://www.khaleejtimes.com/business/real-estate/dubai-property-transactions-record',
                relatedLinks: [
                    { title: 'DLD monthly report', url: 'https://dubailand.gov.ae/en/open-data' },
                    { title: 'Off-plan market analysis', url: 'https://www.propertyfinder.ae/research' }
                ]
            },
            {
                id: 3,
                title: 'DAMAC reports 40% increase in international buyer interest',
                source: 'Arabian Business',
                sourceUrl: 'https://www.arabianbusiness.com/industries/real-estate',
                date: '5 hours ago',
                summary: 'DAMAC Properties sees surge in buyers from Russia, India, and China, with luxury segment leading demand. The company sold AED 8.2B in Q4 2025 alone.',
                aiSummary: 'International demand expanding. Consider geographic targeting in marketing. Luxury positioning resonating with HNW buyers. Explore partnership opportunities.',
                sentiment: 'positive',
                tags: ['damac', 'investment', 'luxury', 'international'],
                competitor: 'damac',
                fullArticleUrl: 'https://www.arabianbusiness.com/industries/real-estate/damac-international-sales',
                relatedLinks: [
                    { title: 'DAMAC investor presentation', url: 'https://www.damacproperties.com/investors' }
                ]
            },
            {
                id: 4,
                title: 'New DLD regulations require enhanced escrow protections',
                source: 'Emirates 24/7',
                sourceUrl: 'https://www.emirates247.com/business/property',
                date: '6 hours ago',
                summary: 'Dubai Land Department introduces stricter escrow requirements for off-plan projects, effective Q2 2026. Developers must maintain 20% higher reserves.',
                aiSummary: 'Regulatory update. Ensure compliance team reviews new requirements. May affect project timelines and cash flow planning. Schedule legal review.',
                sentiment: 'neutral',
                tags: ['regulatory', 'offplan', 'compliance'],
                competitor: null,
                fullArticleUrl: 'https://www.emirates247.com/business/property/dld-escrow-regulations',
                relatedLinks: [
                    { title: 'DLD official announcement', url: 'https://dubailand.gov.ae/en/news' },
                    { title: 'Escrow law explained', url: 'https://rera.gov.ae/regulations' }
                ]
            },
            {
                id: 5,
                title: 'Sobha Hartland Phase 3 sells out in 48 hours',
                source: 'Gulf News',
                sourceUrl: 'https://gulfnews.com/business/property',
                date: '8 hours ago',
                summary: 'Sobha Realty reports complete sellout of 500 units in latest phase, with average price of AED 2,800 per sqft. Strong demand from end-users and investors.',
                aiSummary: 'Strong competitor performance. Pricing benchmark at 2,800/sqft for premium MBR City location. Launch timing critical. Monitor their marketing channels.',
                sentiment: 'neutral',
                tags: ['sobha', 'launch', 'sellout'],
                competitor: 'sobha',
                fullArticleUrl: 'https://gulfnews.com/business/property/sobha-hartland-phase-3-sellout',
                relatedLinks: [
                    { title: 'Sobha Hartland masterplan', url: 'https://www.sobharealty.com/sobha-hartland' }
                ]
            },
            {
                id: 6,
                title: 'Aldar expands Dubai presence with JV announcement',
                source: 'The National',
                sourceUrl: 'https://www.thenationalnews.com/business/property',
                date: '10 hours ago',
                summary: 'Abu Dhabi-based Aldar Properties announces joint venture with Dubai Holding for mixed-use development worth AED 4.5B in Dubai South.',
                aiSummary: 'New competitor entry into Dubai market. Monitor pricing and positioning. Potential market share impact in mid-luxury segment. Track their sales strategy.',
                sentiment: 'negative',
                tags: ['aldar', 'launch', 'expansion'],
                competitor: 'aldar',
                fullArticleUrl: 'https://www.thenationalnews.com/business/property/aldar-dubai-expansion',
                relatedLinks: [
                    { title: 'Aldar press release', url: 'https://www.aldar.com/en/news' },
                    { title: 'Dubai South overview', url: 'https://www.dubaisouth.ae' }
                ]
            },
            {
                id: 7,
                title: 'Palm Jumeirah villa prices reach AED 100M milestone',
                source: 'Bloomberg',
                sourceUrl: 'https://www.bloomberg.com/middle-east',
                date: '12 hours ago',
                summary: 'Ultra-luxury segment continues to break records as Nakheel reports multiple transactions above AED 100 million mark on Palm Jumeirah.',
                aiSummary: 'Ultra-luxury benchmark irrelevant to One Development positioning. Focus on accessible luxury segment differentiation. Note international buyer profiles.',
                sentiment: 'neutral',
                tags: ['nakheel', 'luxury', 'transaction'],
                competitor: 'nakheel',
                fullArticleUrl: 'https://www.bloomberg.com/news/articles/palm-jumeirah-record-sales',
                relatedLinks: [
                    { title: 'Palm Jumeirah market report', url: 'https://www.nakheel.com/palm-jumeirah' }
                ]
            },
            {
                id: 8,
                title: 'Meraas unveils sustainable community concept for 2027',
                source: 'Construction Week',
                sourceUrl: 'https://www.constructionweekonline.com',
                date: '1 day ago',
                summary: 'Meraas Holdings announces plans for carbon-neutral residential community with integrated smart city features, targeting LEED Platinum certification.',
                aiSummary: 'Sustainability angle gaining traction. Consider ESG positioning for upcoming launches. Differentiation opportunity. Research green building certifications.',
                sentiment: 'neutral',
                tags: ['meraas', 'launch', 'sustainability'],
                competitor: 'meraas',
                fullArticleUrl: 'https://www.constructionweekonline.com/projects/meraas-sustainable-community',
                relatedLinks: [
                    { title: 'Meraas sustainability report', url: 'https://www.meraas.com/sustainability' }
                ]
            }
        ];

        // Market trends data with links
        const MARKET_TRENDS = [
            { area: 'Downtown Dubai', price: 2850, change: 12.5, url: 'https://www.propertyfinder.ae/en/search?c=2&l=11&ob=mr' },
            { area: 'Dubai Marina', price: 2200, change: 8.3, url: 'https://www.propertyfinder.ae/en/search?c=2&l=15&ob=mr' },
            { area: 'Palm Jumeirah', price: 3500, change: 15.2, url: 'https://www.propertyfinder.ae/en/search?c=2&l=39&ob=mr' },
            { area: 'Business Bay', price: 1850, change: 6.7, url: 'https://www.propertyfinder.ae/en/search?c=2&l=6&ob=mr' },
            { area: 'JVC', price: 1100, change: 4.2, url: 'https://www.propertyfinder.ae/en/search?c=2&l=29&ob=mr' },
            { area: 'MBR City', price: 2400, change: 9.8, url: 'https://www.propertyfinder.ae/en/search?c=2&l=236&ob=mr' }
        ];

        // Upcoming launches with links
        const LAUNCHES = [
            { date: { month: 'FEB', day: '15' }, project: 'Emaar The Heights', developer: 'Emaar', location: 'Dubai Hills', url: 'https://www.emaar.com/dubai-hills-estate' },
            { date: { month: 'FEB', day: '22' }, project: 'DAMAC Riverside', developer: 'DAMAC', location: 'Business Bay', url: 'https://www.damacproperties.com/business-bay' },
            { date: { month: 'MAR', day: '01' }, project: 'Sobha One Phase 4', developer: 'Sobha', location: 'Ras Al Khor', url: 'https://www.sobharealty.com/sobha-one' },
            { date: { month: 'MAR', day: '10' }, project: 'Meraas Beach Front', developer: 'Meraas', location: 'JBR', url: 'https://www.meraas.com' }
        ];

        let currentFilter = 'all';
        let selectedCompetitor = null;
        let viewMode = 'expanded';

        function init() {
            renderCompetitors();
            renderNews();
            renderMarketTrends();
            renderLaunches();
        }

        function setView(mode) {
            viewMode = mode;
            document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
            event.target.classList.add('active');
            renderNews();
        }

        function renderCompetitors() {
            document.getElementById('competitorGrid').innerHTML = COMPETITORS.map(c => `
                <div class="competitor-card ${selectedCompetitor === c.id ? 'active' : ''}" onclick="selectCompetitor('${c.id}')">
                    <div class="competitor-logo">${c.logo}</div>
                    <div class="competitor-name">${c.name}</div>
                    <div class="competitor-mentions">${c.mentions} mentions</div>
                    <div class="competitor-trend ${c.trend >= 0 ? 'positive' : 'negative'}">
                        ${c.trend >= 0 ? '‚Üë' : '‚Üì'} ${Math.abs(c.trend)}% this week
                    </div>
                </div>
            `).join('');
        }

        function selectCompetitor(id) {
            selectedCompetitor = selectedCompetitor === id ? null : id;
            renderCompetitors();
            renderCompetitorProfile();
            filterNews();
        }

        function renderCompetitorProfile() {
            const container = document.getElementById('profileContent');
            
            if (!selectedCompetitor) {
                container.innerHTML = '<p style="color: var(--text-muted);">Select a competitor to view profile</p>';
                return;
            }

            const comp = COMPETITORS.find(c => c.id === selectedCompetitor);
            
            container.innerHTML = `
                <div class="profile-header">
                    <div class="profile-logo">${comp.logo}</div>
                    <div class="profile-info">
                        <h2>${comp.name}</h2>
                        <p>${comp.projects}</p>
                    </div>
                </div>
                <div class="profile-stats">
                    <div class="profile-stat">
                        <div class="profile-stat-value">${comp.mentions}</div>
                        <div class="profile-stat-label">Mentions</div>
                    </div>
                    <div class="profile-stat">
                        <div class="profile-stat-value ${comp.trend >= 0 ? 'positive' : 'negative'}">${comp.trend >= 0 ? '+' : ''}${comp.trend}%</div>
                        <div class="profile-stat-label">Trend</div>
                    </div>
                    <div class="profile-stat">
                        <div class="profile-stat-value">${comp.strength}</div>
                        <div class="profile-stat-label">Strength</div>
                    </div>
                    <div class="profile-stat">
                        <div class="profile-stat-value">A</div>
                        <div class="profile-stat-label">Rating</div>
                    </div>
                </div>
                <a href="${comp.website}" target="_blank" class="news-link" style="width: 100%; justify-content: center; margin-top: 8px;">
                    üåê Visit ${comp.name} Website ‚Üí
                </a>
            `;
        }

        function renderNews() {
            let news = [...NEWS_DATA];
            
            if (selectedCompetitor) {
                news = news.filter(n => n.competitor === selectedCompetitor);
            }
            
            if (currentFilter !== 'all') {
                news = news.filter(n => n.tags.includes(currentFilter));
            }
            
            const search = document.getElementById('searchInput').value.toLowerCase();
            if (search) {
                news = news.filter(n => 
                    n.title.toLowerCase().includes(search) ||
                    n.summary.toLowerCase().includes(search) ||
                    n.tags.some(t => t.includes(search))
                );
            }

            document.getElementById('newsFeed').innerHTML = news.length ? news.map(n => `
                <div class="news-card" id="news-${n.id}">
                    <div class="news-header">
                        <a href="${n.sourceUrl}" target="_blank" class="news-source">${n.source}</a>
                        <div class="news-meta">
                            <span class="sentiment-badge sentiment-${n.sentiment}">
                                ${n.sentiment === 'positive' ? 'üìà' : n.sentiment === 'negative' ? 'üìâ' : '‚û°Ô∏è'} ${n.sentiment}
                            </span>
                            <span class="news-date">${n.date}</span>
                        </div>
                    </div>
                    <div class="news-title" onclick="openArticle(${n.id})">${n.title}</div>
                    <div class="news-summary">${n.summary}</div>
                    ${viewMode === 'expanded' ? `
                        <div class="news-ai-summary">
                            <div class="news-ai-label">ü§ñ AI Strategic Analysis</div>
                            ${n.aiSummary}
                        </div>
                    ` : ''}
                    <div class="news-footer">
                        <div class="news-tags">
                            ${n.tags.map(t => `<span class="news-tag ${COMPETITORS.some(c => c.id === t) ? 'competitor' : ''}" onclick="handleTagClick('${t}')">${t}</span>`).join('')}
                        </div>
                        <div class="news-actions">
                            <a href="${n.fullArticleUrl}" target="_blank" class="news-link">
                                üìñ Read Full Article ‚Üí
                            </a>
                            <button class="news-link news-link-secondary" onclick="openArticle(${n.id})">
                                üìã Details
                            </button>
                        </div>
                    </div>
                </div>
            `).join('') : '<p style="color: var(--text-muted); text-align: center; padding: 40px;">No news matching filters</p>';

            document.getElementById('totalNews').textContent = news.length;
        }

        function handleTagClick(tag) {
            const comp = COMPETITORS.find(c => c.id === tag);
            if (comp) {
                selectCompetitor(tag);
            } else {
                setFilter(tag);
                document.querySelectorAll('.filter-tab').forEach(t => {
                    t.classList.toggle('active', t.textContent.toLowerCase().includes(tag));
                });
            }
        }

        function openArticle(id) {
            const article = NEWS_DATA.find(n => n.id === id);
            if (!article) return;

            const modal = document.getElementById('articleModal');
            const content = document.getElementById('modalContent');

            content.innerHTML = `
                <a href="${article.sourceUrl}" target="_blank" class="news-source" style="margin-bottom: 16px; display: inline-block;">${article.source}</a>
                <h1 style="font-family: 'Space Grotesk'; font-size: 1.75rem; margin-bottom: 16px; line-height: 1.3;">${article.title}</h1>
                <div style="color: var(--text-muted); margin-bottom: 24px;">${article.date}</div>
                
                <div style="font-size: 1.1rem; line-height: 1.8; margin-bottom: 24px;">${article.summary}</div>
                
                <div class="news-ai-summary" style="margin-bottom: 24px;">
                    <div class="news-ai-label">ü§ñ AI Strategic Analysis for One Development</div>
                    ${article.aiSummary}
                </div>

                <div style="margin-bottom: 24px;">
                    <div style="font-weight: 600; margin-bottom: 12px;">üîó Related Links</div>
                    ${article.relatedLinks.map(l => `
                        <a href="${l.url}" target="_blank" style="display: block; padding: 12px; background: var(--bg-card); border-radius: 8px; margin-bottom: 8px; color: var(--text-primary); text-decoration: none; border: 1px solid var(--border); transition: all 0.2s;">
                            ${l.title} ‚Üí
                        </a>
                    `).join('')}
                </div>

                <div style="display: flex; gap: 12px;">
                    <a href="${article.fullArticleUrl}" target="_blank" class="news-link" style="flex: 1; justify-content: center;">
                        üìñ Read Full Article on ${article.source} ‚Üí
                    </a>
                </div>
            `;

            modal.classList.add('active');
        }

        function closeModal(e) {
            if (!e || e.target === document.getElementById('articleModal')) {
                document.getElementById('articleModal').classList.remove('active');
            }
        }

        function renderMarketTrends() {
            document.getElementById('marketTrends').innerHTML = MARKET_TRENDS.map(t => `
                <div class="trend-item" onclick="window.open('${t.url}', '_blank')">
                    <span class="trend-area">${t.area}</span>
                    <span class="trend-price">AED ${t.price.toLocaleString()}/sqft</span>
                    <span class="trend-change ${t.change >= 0 ? 'positive' : 'negative'}">${t.change >= 0 ? '+' : ''}${t.change}%</span>
                </div>
            `).join('');
        }

        function renderLaunches() {
            document.getElementById('launchCalendar').innerHTML = LAUNCHES.map(l => `
                <div class="launch-item" onclick="window.open('${l.url}', '_blank')">
                    <div class="launch-date">
                        <div class="launch-month">${l.date.month}</div>
                        <div class="launch-day">${l.date.day}</div>
                    </div>
                    <div class="launch-details">
                        <h4>${l.project}</h4>
                        <p>${l.developer} ‚Ä¢ ${l.location}</p>
                        <div class="launch-link">View Details ‚Üí</div>
                    </div>
                </div>
            `).join('');
        }

        function setFilter(filter) {
            currentFilter = filter;
            document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
            event.target.classList.add('active');
            renderNews();
        }

        function filterNews() {
            renderNews();
        }

        function refreshAll() {
            init();
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape') closeModal();
        });

        // Initialize
        init();
    </script>
</body>
</html>
